# Changelog

All notable changes to GARAMe MANAGER will be documented in this file.

## [2.0.1] - 2026-01-16

### Added
- ✅ **안전점검 기능**: 거울보기 → 안전점검으로 명칭 변경
- ✅ **센서전체보기**: 2개 이상 센서 접속 시 분할 화면 지원
- ✅ **화면 캡쳐 기능**: Linux/Wayland 호환 (scrot/gnome-screenshot)
- ✅ **종료 확인 다이얼로그**: 불쾌지수 10번 클릭 시 확인 후 종료

### Improved
- ⚡ **불쾌지수 시인성 개선**: 레벨별 배경색+글자색 조합
- ⚡ **경고 버튼 텍스트 개선**: `주의0/경계0/심각0` 형식

### Fixed
- 🐛 **안전점검 종료 오류 수정**: TclError 해결
- 🐛 **안전점검 레이아웃 개선**: 좌우 패널 크기 동일

---

## [2.0.0] - 2026-01-15

### Added
- ✅ **화재 감시 5단계 경보 시스템**
  - 5단계 경보: 정상 → 관심 → 주의 → 경계 → 위험
  - Dempster-Shafer 증거 이론 기반 센서 융합
  - AI 적응형 임계값 자동 조정

- ✅ **TCP 프로토콜 v2.0**
  - 양방향 통신 (센서 ↔ 매니저)
  - NTP 스타일 시간 동기화
  - TLS/SSL 암호화 지원

- ✅ **신규 센서 지원**
  - CH4 (메탄/가연성 가스)
  - Smoke (연기 센서)
  - ext_input (외부 접점 입력)

### Changed
- 🔄 그래프 모드 → 동적 타일 레이아웃으로 대체
- 🔄 화재 경보 패널 좌측 사이드바 추가

---

## [1.9.5] - 2025-01-18

### Added
- ✅ **InsightFace 얼굴 인식 시스템**
  - 99.86% 정확도 (기존 99.38% 대비 향상)
  - ArcFace 알고리즘 기반
  - GPU 가속 지원 (ONNX Runtime)
  - 512차원 얼굴 특징 벡터

- ✅ **YOLOv11 PPE 안전장구 감지**
  - 92.7% mAP50 정확도 (기존 Haar Cascade 70% 대비 대폭 향상)
  - 안전모, 보안경, 장갑, 안전화, 안전조끼 감지
  - 실시간 처리 가능
  - 미착용 감지 및 경고

- ✅ **AI 모델 자동 다운로드**
  - InsightFace buffalo_l 모델
  - YOLOv11 PPE 전용 모델
  - 최초 실행 시 자동 다운로드

- ✅ **음성 알림 시스템 개선**
  - gTTS (Google Text-to-Speech) 엔진 적용
  - 자연스러운 한국어 여성 아나운서 목소리
  - 정확한 한국어 발음 (구글 음성 합성 기술)
  - 스마트 캐시 시스템 (반복 메시지 즉시 재생)
  - mpg123/ffmpeg 기반 오디오 재생

### Improved
- ⚡ 얼굴 인식 속도 향상 (GPU 가속)
- ⚡ PPE 감지 정확도 22.7% 향상
- ⚡ 실시간 처리 성능 최적화
- ⚡ 음성 알림 품질 대폭 향상 (자연스러운 여성 목소리)

### Changed
- 🔄 safety_detector.py → safety_detector_v2.py (최신 AI 적용)
- 🔄 requirements.txt 업데이트 (InsightFace, Ultralytics, gTTS, pydub)
- 🔄 pyttsx3 → gTTS (음성 엔진 교체)

---

## [1.9.4] - 2025-11-13

### Added
- ✅ OpenCV 모듈 누락 방지 시스템
  - `check_cv2.sh` 스크립트로 빌드 전 진단
  - install.sh에서 OpenCV 검사 실패 시 빌드 중단

### Improved
- ⚡ 설치 프로세스 안정성 향상
- ⚡ Ubuntu 25 완전 지원

---

## [1.9.3] - 2025-11-12

### Added
- ✅ **탭 삭제 기능**
  - 연결 끊김 센서 탭을 "❌ 탭 삭제" 버튼으로 제거
  - 확인 대화상자로 실수 방지
  - 관련 데이터 자동 정리 (패널, 상태, 경고 이력)

- ✅ **음성 경고 개선**
  - 자연스러운 여자 음성 자동 선택
  - 3단계 우선순위: 한국어 여성 → 영어 여성 → 한국어
  - 음성 속도 최적화 (140 WPM)

- ✅ **거울보기 얼굴/객체 인식 강화**
  - 얼굴 인식 결과 시각화 (이름, 사원번호, 부서, 신뢰도)
  - 배경 학습 파라미터 추가
  - 안전장구 감지 개선

- ✅ **그래프 한글 폰트 자동 탐지**
  - 시스템 한글 폰트 자동 검색 및 적용
  - 우선순위: NanumGothic > NanumBarunGothic > Noto Sans CJK KR
  - 폴백 지원 (DejaVu Sans)

- ✅ **빌드 번호 시스템**
  - 버전과 빌드 번호 분리 관리
  - 빌드 25251112

### Improved
- ⚡ UI/UX 개선
  - 버튼 크기 최적화
  - 얼굴촬영 화면 개선 (날짜/시간 표시)
  - 캡쳐 알림 1초 후 자동 사라짐

- ⚡ 카메라 리셋 기능 강화
  - 리셋 후 자동 가용성 재확인
  - 거울보기 버튼 자동 활성화

### Fixed
- 🐛 그래프 한글 표시 문제 (□□□ → 정상 한글)
- 🐛 거울보기 인식 문제 해결
- 🐛 얼굴 인식률 표시 수정

---

## [1.9.2] - 2025-11-10

### Added
- ✅ Sensor v1.1.5 Heartbeat 메시지 수신 지원

### Improved
- ⚡ TCP 통신 안정성 향상
  - 다중 센서 동시 연결 안정화
  - 연결 상태 실시간 모니터링 (30초 간격)

- ⚡ 에러 처리 강화
  - 센서 연결 오류 처리 개선
  - 통신 오류 자동 복구

---

## [1.9.1] - 2025-11-08

### Improved
- ⚡ 센서 데이터 처리 로직 최적화
- ⚡ UI 안정성 개선

---

## [1.9.0] - 2025-11-05

### Added
- ✅ systemd 서비스 지원
  - 부팅 시 자동 시작
  - 서비스 관리 스크립트

### Changed
- 🔄 **Windows 지원 완전 제거**
  - Ubuntu Linux 전용으로 전환
  - 모든 Windows 관련 코드 제거

### Improved
- ⚡ Watchdog 프로그램 개선
  - 정상 종료 시그널 처리 개선
  - 중복 실행 방지
  - GUI 접근성 개선

---

## [1.8.9] - 2025-11-04

### Added
- ✅ Watchdog 프로그램
  - 프로그램 비정상 종료 감시
  - 자동 재시작 기능

---

## [1.8.8] - 2025-11-04

### Added
- ✅ 문자 크기 조절 실시간 반영
- ✅ 서명 인식 기능 개선
- ✅ 오프라인 실행 지원
- ✅ CPU 호환성 개선

### Improved
- ⚡ 시스템 패키지 자동 설치
- ⚡ 플랫폼별 어댑터 패턴 도입

---

## 버전 형식
- MAJOR.MINOR.PATCH
- Added: 새로운 기능
- Changed: 기존 기능 변경
- Improved: 기존 기능 개선
- Fixed: 버그 수정
