# GARAMe Manager v2.0 통합 안전관리 시스템 사용자 설명서

## 목차

1. [개요](#1-개요)
2. [5단계 경보 체계](#2-5단계-경보-체계)
3. [센서별 기준값](#3-센서별-기준값)
4. [화면 구성](#4-화면-구성)
5. [센서별 경보](#5-센서별-경보)
6. [화재 감시 시스템](#6-화재-감시-시스템)
7. [경보 대응](#7-경보-대응)
8. [AI 적응형 시스템](#8-ai-적응형-시스템)
9. [설정](#9-설정)
10. [문제 해결](#10-문제-해결)
11. [부록](#부록)

---

## 1. 개요

### 1.1 GARAMe Manager란?

GARAMe Manager는 밀폐공간 안전 관리를 위한 **통합 모니터링 시스템**입니다.

다중 센서의 데이터를 실시간으로 수집하고, 5단계 경보 시스템과 AI 기반 화재 감지를 통해 작업자의 안전을 관리합니다.

### 1.2 v2.0 주요 특징

| 기능 | 설명 |
|------|------|
| **센서 모니터링** | CO₂, O₂, H₂S, CO, LEL, 연기, 온습도, 누수 실시간 감시 |
| **5단계 경보 시스템** | 정상 → 관심 → 주의 → 경계 → 심각 단계별 경보 |
| **화재 감시** | 다중 센서 융합 기반 지능형 화재 감지 |
| **AI 적응형 임계값** | 설치 환경에 맞게 자동 최적화 |
| **PPE 감지** | YOLOv10x 기반 안전장구 감지 |
| **얼굴 인식** | InsightFace 기반 작업자 인식 |
| **음성 경보** | gTTS 한국어 음성 알림 |

### 1.3 v2.0 신규 기능

#### 화재 감시 시스템
- **다중 센서 융합**: Dempster-Shafer 증거 이론 기반
- **5단계 화재 경보**: 정상 → 관심 → 주의 → 경계 → 위험
- **긴급 다이얼로그**: 전체화면 경고 + 경보음

#### AI 적응형 시스템
- **환경 자동 학습**: 설치 후 7~30일 데이터 분석
- **임계값 자동 조정**: 표준값 ±30% 범위 내 최적화
- **오경보 최소화**: 환경별 맞춤 설정

#### TCP 프로토콜 v2.0
- **TLS 1.3 암호화**: 보안 통신
- **메시지 무결성**: HMAC-SHA256 서명
- **v1.x 역호환**: 기존 센서 완벽 호환

---

## 2. 5단계 경보 체계

### 2.1 경보 단계 정의

GARAMe Manager는 모든 센서에 대해 **5단계 경보 시스템**을 적용합니다.

| 단계 | 상태 | 아이콘 | 색상 | 의미 |
|------|------|--------|------|------|
| **1** | 정상 | 🟢 | 녹색 `#2ECC71` | 모든 센서 정상 범위 |
| **2** | 관심 | 🟡 | 노랑 `#F1C40F` | 일부 센서 변화 감지 |
| **3** | 주의 | 🟠 | 주황 `#E67E22` | 임계치 근접, 주의 필요 |
| **4** | 경계 | 🔴 | 빨강 `#E74C3C` | 위험 수준, 즉시 조치 필요 |
| **5** | 심각 | 🔴 | 진홍 `#C0392B` | 극히 위험, 즉시 대피 |

### 2.2 경보 방식

#### 센서별 경보 (개별 센서)
- 각 센서마다 독립적으로 5단계 경보 판정
- 센서 타일 색상 변경
- 음성 알림 (3단계 이상)

#### 화재 경보 (다중 센서 융합)
- 여러 센서 데이터를 종합 분석
- 화재 확률 계산 (0~100%)
- 긴급 다이얼로그 표시 (3단계 이상)

### 2.3 단계별 대응 조치

| 단계 | 대응 조치 |
|------|-----------|
| **1단계 (정상)** | 일상 모니터링 유지 |
| **2단계 (관심)** | 주의 관찰, 환기 점검 |
| **3단계 (주의)** | 현장 확인, 대피 준비 |
| **4단계 (경계)** | 즉시 대피, 소방 신고 |
| **5단계 (심각)** | 긴급 대피, 현장 진입 금지 |

---

## 3. 센서별 기준값

### 3.1 이산화탄소 (CO₂)

| 단계 | 범위 | 설명 |
|------|------|------|
| 정상 | ≤ 1,000 ppm | 쾌적한 환경 |
| 관심 | 1,001 ~ 5,000 ppm | 환기 권장 |
| 주의 | 5,001 ~ 10,000 ppm | 환기 필요 |
| 경계 | 10,001 ~ 15,000 ppm | 즉시 환기 |
| 심각 | > 15,000 ppm | 대피 필요 |

### 3.2 산소 (O₂)

| 단계 | 범위 | 설명 |
|------|------|------|
| 정상 | 19.5% ~ 23.0% | 정상 호흡 가능 |
| 관심 | 19.0% ~ 19.5% 또는 23.0% ~ 23.0% | 주의 관찰 |
| 주의 | 18.5% ~ 19.0% 또는 23.0% ~ 23.3% | 환기 필요 |
| 경계 | 18.0% ~ 18.5% 또는 23.3% ~ 23.5% | 즉시 환기 |
| 심각 | < 18.0% 또는 > 23.5% | 대피 필요 |

> **참고**: 산소 농도 18% 미만은 산소결핍 위험, 23.5% 초과는 화재 위험 증가

### 3.3 황화수소 (H₂S)

| 단계 | 범위 | 설명 |
|------|------|------|
| 정상 | ≤ 5 ppm | 안전 |
| 관심 | 6 ~ 8 ppm | 냄새 감지 가능 |
| 주의 | 9 ~ 10 ppm | 노출 시간 제한 |
| 경계 | 11 ~ 15 ppm | 즉시 환기 |
| 심각 | > 15 ppm | 대피 필요 |

> **경고**: H₂S 100ppm 이상 노출 시 즉시 의식 상실 위험

### 3.4 일산화탄소 (CO)

| 단계 | 범위 | 설명 |
|------|------|------|
| 정상 | ≤ 9 ppm | 대기 중 허용 수준 |
| 관심 | 10 ~ 25 ppm | 환기 권장 |
| 주의 | 26 ~ 30 ppm | 환기 필요 |
| 경계 | 31 ~ 50 ppm | 즉시 환기 |
| 심각 | > 50 ppm | 대피 필요 |

> **참고**: CO는 무색무취로 감지 어려움, 센서 모니터링 필수

### 3.5 가연성가스 (LEL/CH₄)

| 단계 | 범위 | 설명 |
|------|------|------|
| 정상 | ≤ 10% LEL | 안전 |
| 관심 | 11 ~ 20% LEL | 환기 권장 |
| 주의 | 21 ~ 50% LEL | 환기 필요, 점화원 제거 |
| 경계 | 51 ~ 50% LEL | 즉시 환기 |
| 심각 | > 50% LEL | 폭발 위험, 대피 |

> **경고**: LEL 100%는 폭발 하한선, 50% 이상은 매우 위험

### 3.6 연기 (Smoke)

| 단계 | 범위 | 설명 |
|------|------|------|
| 정상 | 0% | 연기 없음 |
| 관심 | 1 ~ 10% | 미세 연기 감지 |
| 주의 | 11 ~ 25% | 화재 초기 징후 |
| 경계 | 26 ~ 50% | 화재 발생 확실 |
| 심각 | > 50% | 대규모 화재 |

### 3.7 온도 (Temperature)

| 단계 | 범위 | 설명 |
|------|------|------|
| 정상 | 18°C ~ 28°C | 쾌적 온도 |
| 관심 | 16°C ~ 18°C 또는 28°C ~ 30°C | 약간 불쾌 |
| 주의 | 14°C ~ 16°C 또는 30°C ~ 32°C | 불쾌 환경 |
| 경계 | 12°C ~ 14°C 또는 32°C ~ 33°C | 위험 환경 |
| 심각 | < 12°C 또는 > 33°C | 극한 환경 |

### 3.8 습도 (Humidity)

| 단계 | 범위 | 설명 |
|------|------|------|
| 정상 | 40% ~ 60% RH | 쾌적 습도 |
| 관심 | 30% ~ 40% 또는 60% ~ 70% RH | 약간 불쾌 |
| 주의 | 20% ~ 30% 또는 70% ~ 80% RH | 불쾌 환경 |
| 경계 | 20% 이하 또는 80% 이상 RH | 위험 환경 |
| 심각 | 극한 건조/과습 | 건강 위험 |

### 3.9 누수 (Water)

| 상태 | 값 | 설명 |
|------|-----|------|
| 정상 | 0 | 누수 없음 |
| 심각 | 1 | 누수 감지 - 즉시 확인 필요 |

---

## 4. 화면 구성

### 4.1 메인 화면 레이아웃

```
┌──────────────────────────────────────────────────────────────────────────┐
│  [로고]  GARAMe MANAGER v2.0                    [시간] [관리자] [전체화면]  │
├─────────────┬────────────────────────────────────────────────────────────┤
│             │  [센서1] [센서2] [센서3] [센서4]  ← 센서 탭                 │
│  🔥 화재    ├────────────────────────────────────────────────────────────┤
│    감시     │                                                            │
│             │   ┌─────────┐ ┌─────────┐ ┌─────────┐ ┌─────────┐        │
│   🟢        │   │ 🏭 CO₂  │ │ 💨 O₂   │ │ ☠️ H₂S  │ │ 🔥 CO   │        │
│  정상       │   │   450   │ │  20.9   │ │   0.0   │ │    0    │        │
│             │   │   ppm   │ │   %     │ │   ppm   │ │   ppm   │        │
│ 화재 확률   │   └─────────┘ └─────────┘ └─────────┘ └─────────┘        │
│   0.0%      │                                                            │
│ ▓░░░░░░░░░  │   ┌─────────┐ ┌─────────┐ ┌─────────┐ ┌─────────┐        │
│             │   │ ⚡ LEL   │ │ 🌫️ 연기 │ │ 🌡️ 온도 │ │ 💧 습도 │        │
│ ──────────  │   │    0    │ │    0    │ │  24.5   │ │   55    │        │
│ 센서 상태   │   │  %LEL   │ │    %    │ │   ℃    │ │   %RH   │        │
│ 🌡️ 온도 24.5│   └─────────┘ └─────────┘ └─────────┘ └─────────┘        │
│ 💧 습도 55  │                                                            │
│ 🔥 CO  0    │   ┌─────────────────────────────────────────────────┐      │
│ 🏭 CO2 450  │   │                   🚿 누수                       │      │
│ 💨 O2  20.9 │   │                    정상                         │      │
│ 🌫️ 연기 0   │   └─────────────────────────────────────────────────┘      │
│             │                                                            │
│ ──────────  ├────────────────────────────────────────────────────────────┤
│ 🤖 AI 학습  │  [타일] [도면] | [거울보기] [캡쳐] | [버전: 2.0.0]          │
│   완료      │                                                            │
└─────────────┴────────────────────────────────────────────────────────────┘
```

### 4.2 좌측 화재 경보 패널

화면 좌측에 위치한 화재 감시 전용 패널입니다.

| 영역 | 설명 |
|------|------|
| **경보 아이콘** | 현재 화재 경보 단계 (🟢🟡🟠🔴🟣) |
| **경보 텍스트** | "정상", "관심", "주의", "경계", "위험" |
| **화재 확률** | 0.0% ~ 100.0% 수치 |
| **프로그레스 바** | 화재 확률 시각적 막대 |
| **센서 상태** | 각 센서 현재 값 |
| **AI 학습 상태** | 학습 진행률 |

### 4.3 동적 타일 그리드

접속된 센서 수에 따라 타일 레이아웃이 자동 조정됩니다:

| 센서 수 | 레이아웃 |
|---------|----------|
| 1개 | 1×1 |
| 2개 | 1×2 |
| 3~4개 | 2×2 |
| 5~6개 | 2×3 |
| 7~9개 | 3×3 |
| 10~12개 | 3×4 |
| 13~16개 | 4×4 |

### 4.4 센서 타일 색상

각 센서 타일은 **해당 센서의 경보 레벨**에 따라 배경색이 변경됩니다:

| 레벨 | 색상 | 색상 코드 |
|------|------|-----------|
| 정상 | 녹색 | `#2ECC71` |
| 관심 | 노랑 | `#F1C40F` |
| 주의 | 주황 | `#E67E22` |
| 경계 | 빨강 | `#E74C3C` |
| 심각 | 진홍 | `#C0392B` |

---

## 5. 센서별 경보

### 5.1 개별 센서 경보 동작

각 센서는 독립적으로 5단계 경보를 판정합니다:

1. **센서값 수신** → 해당 센서의 임계값과 비교
2. **경보 레벨 결정** → 1~5단계 중 해당 레벨 판정
3. **타일 색상 변경** → 경보 레벨에 맞는 색상으로 표시
4. **음성 알림** → 3단계(주의) 이상 시 TTS 음성 경보

### 5.2 음성 경보

3단계(주의) 이상의 경보 발생 시 음성으로 알림합니다:

**예시 음성 메시지:**
- "일산화탄소 현재값 35 입니다. 주의 단계입니다."
- "황화수소 현재값 12 입니다. 경계 단계입니다. 즉각 조치가 필요합니다."
- "산소 현재값 17.5 입니다. 심각한 위험 상태입니다. 즉시 대피하세요."
- "누수가 감지되었습니다. 즉시 확인하세요."

### 5.3 센서 통계

각 센서 타일 하단에 오늘의 통계가 표시됩니다:

```
오늘 통계: 최저 / 평균 / 최고
```

예: `오늘 통계: 18.2 / 24.5 / 28.1`

---

## 6. 화재 감시 시스템

### 6.1 개요

화재 감시 시스템은 **다중 센서 데이터를 융합**하여 화재 발생 가능성을 종합적으로 판단합니다.

개별 센서 경보와 별도로 동작하며, 여러 센서의 데이터를 종합 분석하여 더 정확한 화재 감지가 가능합니다.

### 6.2 화재 경보 레벨

| 단계 | 화재 확률 | 아이콘 | 색상 |
|------|-----------|--------|------|
| 정상 | 0% ~ 15% | 🟢 | 녹색 |
| 관심 | 15% ~ 35% | 🟡 | 노랑 |
| 주의 | 35% ~ 60% | 🟠 | 주황 |
| 경계 | 60% ~ 85% | 🔴 | 빨강 |
| 위험 | 85% ~ 100% | 🟣 | 보라 |

### 6.3 화재 감지 원리

시스템은 다음 센서들을 융합 분석합니다:

| 센서 | 가중치 | 역할 |
|------|--------|------|
| 연기 | 25% | 가장 빠른 화재 반응 |
| CO | 20% | 불완전 연소 핵심 지표 |
| 온도 상승률 | 18% | 화재 성장 속도 반영 |
| O₂ | 12% | 연소 진행도 지표 |
| CO₂ | 10% | 연소 확인 보조 |
| 온도 | 8% | 직접 지표 |
| CH₄/LEL | 5% | 폭발 위험 보조 |
| 습도 | 2% | 간접 지표 |

### 6.4 긴급 경보 다이얼로그

**3단계(주의) 이상**의 화재 경보 발생 시 전체화면 긴급 다이얼로그가 표시됩니다:

```
┌─────────────────────────────────────────────────────────────────────────┐
│                                                                         │
│                              🔥                                         │
│                                                                         │
│                        화재 경계                                        │
│                                                                         │
│                     화재 확률: 72.5%                                    │
│                                                                         │
│                   📍 위치: 지하 1층 기계실                               │
│                   ⏰ 감지 시간: 2026-01-15 14:32:15                      │
│                                                                         │
│                   ┌─────────────────────────────────┐                   │
│                   │ ⚠️ 경보 발생 센서                 │                   │
│                   │   • 일산화탄소(CO): 85 ppm       │                   │
│                   │   • 연기: 25%                   │                   │
│                   │   • 온도: 42°C                  │                   │
│                   └─────────────────────────────────┘                   │
│                                                                         │
│              [📞 119 긴급 연락]        [✓ 확인]                          │
│                                                                         │
│                  ESC 키를 눌러 창을 닫을 수 있습니다                       │
│                                                                         │
└─────────────────────────────────────────────────────────────────────────┘
```

**긴급 다이얼로그 기능:**
- 전체화면으로 즉시 인지 가능
- 경보음 자동 재생
- 아이콘 깜빡임 효과 (🔥 ↔ ⚠️)
- **119 긴급 연락** 버튼
- **ESC** 키 또는 **확인** 버튼으로 닫기

### 6.5 오경보 방지

다음 상황에서는 자동으로 오경보를 필터링합니다:

| 상황 | 특징 | 시스템 대응 |
|------|------|-------------|
| **요리/흡연** | 연기↑, CO<30ppm, 온도<35°C | 경보 30초 억제 |
| **환기 불량** | CO₂↑, O₂정상, 연기없음 | 화재 확률 -20% |
| **일시적 변동** | 단일 센서만 상승 후 정상화 | 최소 지속시간 미충족 |

---

## 7. 경보 대응

### 7.1 센서별 경보 대응

#### 3단계 (주의) 발생 시
1. 해당 센서 타일 확인 (주황색)
2. 현장 상황 확인
3. 환기 실시 또는 원인 제거

#### 4단계 (경계) 발생 시
1. 해당 센서 타일 확인 (빨간색)
2. 즉시 현장 확인
3. 작업 중단 및 환기
4. 관계자 보고

#### 5단계 (심각) 발생 시
1. 해당 센서 타일 확인 (진홍색)
2. 즉시 대피
3. 119 신고 (가스 누출, 화재 등)
4. 전문가 조치 대기

### 7.2 화재 경보 대응

#### 3단계 (주의) 🟠 발생 시
1. 긴급 다이얼로그 확인
2. 현장 확인 (연기, 불꽃, 냄새)
3. 상황 전파
4. 오경보 시: 확인 버튼 클릭

#### 4단계 (경계) 🔴 발생 시
1. 즉시 대피 명령
2. 119 신고
3. 초기 진화 시도 (안전한 경우)
4. 인명 확인

#### 5단계 (위험) 🟣 발생 시
1. 완전 대피 확인
2. 현장 진입 금지
3. 소방대 도착 대기
4. 정보 제공 (도면, 위험물)

### 7.3 센서 고장 대응

센서 통신이 60초 이상 끊어지면:

1. 해당 센서 타일이 **회색**으로 표시
2. "통신 끊김" 상태 표시
3. 다른 센서로 모니터링 계속

**조치:**
- 센서 전원 확인
- 네트워크 연결 확인
- 센서 재시작 또는 교체

---

## 8. AI 적응형 시스템

### 8.1 개요

설치 초기에는 **국가 표준 기준값**을 적용하고, 운영 데이터가 축적되면 **설치 환경에 최적화된 임계값**으로 자동 조정합니다.

### 8.2 학습 단계

| 단계 | 기간 | 상태 | 표시 |
|------|------|------|------|
| Cold Start | 0~24시간 | 표준값 사용 | 🤖 AI 학습: 대기중 |
| Warm-up | 1~7일 | 초기 학습 | 🤖 AI 학습: 진행중 15% |
| Learning | 7~30일 | 적응 진행 | 🤖 AI 학습: 진행중 60% |
| Adaptive | 30일+ | 최적화 완료 | 🤖 AI 학습: 완료 |

### 8.3 환경 자동 감지

| 환경 유형 | 특성 |
|-----------|------|
| 🏢 사무실 | 안정적, 낮은 변동 |
| 🏭 공장/제조 | 높은 변동, 피크 시간 |
| 🍳 주방/식당 | CO₂↑, 연기 간헐적 |
| 🚇 지하시설 | 환기 의존, O₂ 변동 |
| 📦 창고/물류 | 넓은 공간, 완만한 변화 |
| ⚡ 전기실 | 고온, 낮은 습도 |

### 8.4 임계값 조정 범위

안전을 위해 **표준값의 ±30%** 범위 내에서만 조정됩니다.

---

## 9. 설정

### 9.1 센서 임계값 설정

설정 파일 또는 설정 UI에서 각 센서의 임계값을 조정할 수 있습니다.

**설정 메뉴 → 경보 설정**에서:
- 각 센서의 5단계 경보 임계값
- 음성 경보 활성화/비활성화
- 경보 지속 시간

### 9.2 화재 감시 설정

**설정 메뉴 → 화재 감시**에서:
- 화재 감시 활성화/비활성화
- 긴급 다이얼로그 표시 레벨 (기본: 3단계)
- 경보음 활성화/비활성화

### 9.3 AI 적응 설정

**설정 메뉴 → AI 적응**에서:
- AI 적응 활성화/비활성화
- 최대 조정 범위 (기본: 30%)
- 표준값 복원

---

## 10. 문제 해결

### 10.1 FAQ

#### Q1. 센서 타일이 회색으로 표시됩니다
**A**: 해당 센서의 통신이 끊어진 상태입니다. 센서 전원과 네트워크를 확인하세요.

#### Q2. 음성 경보가 나오지 않습니다
**A**: 다음을 확인하세요:
1. 음성 경보 설정이 활성화되어 있는지
2. mpg123 또는 ffmpeg가 설치되어 있는지
3. 스피커가 연결되어 있는지

#### Q3. 오경보가 자주 발생합니다
**A**: AI 적응 시스템이 학습 완료(30일)할 때까지 대기하거나, 임계값을 수동으로 조정하세요.

#### Q4. 긴급 다이얼로그가 닫히지 않습니다
**A**: ESC 키, Enter 키, 또는 확인 버튼을 클릭하세요.

### 10.2 오류 메시지

| 메시지 | 원인 | 해결 방법 |
|--------|------|-----------|
| "센서 연결 대기중..." | 센서 미연결 | 센서 연결 확인 |
| "통신 끊김" | 센서 통신 오류 | 네트워크 확인 |
| "AI 학습: 데이터 부족" | 학습 데이터 부족 | 데이터 수집 대기 |

---

## 부록

### A. 센서 정상 범위 요약

| 센서 | 단위 | 정상 범위 |
|------|------|-----------|
| CO₂ | ppm | ≤ 1,000 |
| O₂ | % | 19.5 ~ 23.0 |
| H₂S | ppm | ≤ 5 |
| CO | ppm | ≤ 9 |
| LEL | %LEL | ≤ 10 |
| 연기 | % | 0 |
| 온도 | °C | 18 ~ 28 |
| 습도 | %RH | 40 ~ 60 |
| 누수 | - | 0 (없음) |

### B. 긴급 연락처

| 구분 | 연락처 | 용도 |
|------|--------|------|
| **소방서** | 119 | 화재, 구조 |
| **경찰** | 112 | 범죄, 긴급상황 |
| **가스 안전공사** | 1544-4500 | 가스 누출 |
| **한국전력** | 123 | 전기 관련 |

### C. 키보드 단축키

| 키 | 기능 |
|----|------|
| F11 | 전체화면 전환 |
| ESC | 다이얼로그 닫기 |
| Enter | 확인 |

---

**문서 버전**: 1.0
**작성일**: 2026-01-15
**작성자**: GARAMe Manager 개발팀
**적용 버전**: GARAMe Manager v2.0.0
